;зддддддддддддддддддддддддддддддддддддддддддддддддддд©
;Ё lumberjacks                                       Ё
;цддддддддддддддддддддддддддддддддддддддддддддддддддд╢
;Ё                                                   Ё
;Ё copyright (C) 2017 jeff panici                    Ё
;Ё https://nybbles.io                                Ё
;Ё                                                   Ё
;Ё                                                   Ё
;Ё                                                   Ё
;юддддддддддддддддддддддддддддддддддддддддддддддддддды

;зддддддддддддддддддддддддддддддддддддддддддддддддддд©
;Ё macros                                            Ё
;юддддддддддддддддддддддддддддддддддддддддддддддддддды
s$_defc macro
    db  1, #1
#em

s$_def macro
    db  #s1 - 2, #1
#em

s$_defq macro
    db  #s1, '#1'
#em

s$_resv macro
    db      #1
    db      #1 dup(020h)
#em

;зддддддддддддддддддддддддддддддддддддддддддддддддддд©
;Ё s$_dec2                                           Ё
;юддддддддддддддддддддддддддддддддддддддддддддддддддды
s$_dec2:
    push    es, ax
    mov     es, cs
    aam
    add     ax, '00'
    xchg    ah, al
    stosw
    pop     ax, es
    ret

;зддддддддддддддддддддддддддддддддддддддддддддддддддд©
;Ё s$_dec5                                           Ё
;юддддддддддддддддддддддддддддддддддддддддддддддддддды
s$_dec5:
    push    es, ax, bx, dx
    xchg    dx, ax
    mov     ax, '00'
    stosw
    stosw
    push    di
    mov     bx, 10
    std
l0: xchg    ax, dx
    xor     dx, dx
    div     bx
    xchg    dx, ax
    add     al, '0'
    stosb
    test    dx
    jnz     l0
    pop     di
    inc     di
    pop     dx, bx, ax, es
    cld
    ret

;зддддддддддддддддддддддддддддддддддддддддддддддддддд©
;Ё s$_hex2                                           Ё
;юддддддддддддддддддддддддддддддддддддддддддддддддддды
s$_hex2:
    push    es, ax
    aam     16
    xchg    al, ah
    add     al, 090h
    daa
    adc     al, 040h
    daa
    stosb
    inc     di
    xchg    al, ah
    add     al, 090h
    daa
    adc     al, 040h
    daa
    stosb
    inc     di
    pop     ax, es
    ret
